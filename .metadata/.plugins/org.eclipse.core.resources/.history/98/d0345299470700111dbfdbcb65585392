set(bacnet_dir "src/bacnet")
set(port_dir "ports/esp32")

idf_component_register(
    SRCS 
        "${bacnet_dir}/datalink/bip.c"      # For BACnet/IP
        "${bacnet_dir}/npdu.c"
        "${bacnet_dir}/apdu.c"
        "${bacnet_dir}/whois.c"
        "${bacnet_dir}/rp.c"                # For Client Read requests
        "${port_dir}/net.c"                 # ESP32 network glue
        "${port_dir}/stubs.c"
    INCLUDE_DIRS 
        "src" 
        "ports/esp32"
    REQUIRES 
        lwip esp_netif                      # BACnet/IP dependencies
)