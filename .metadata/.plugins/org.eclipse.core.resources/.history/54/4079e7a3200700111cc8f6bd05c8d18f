# 1. Find all .c files recursively
file(GLOB_RECURSE BACNET_SOURCES "src/*.c")

# 2. Register the component
idf_component_register(
    SRCS ${BACNET_SOURCES}
    INCLUDE_DIRS "include" "src"
    REQUIRES lwip esp_wifi esp_netif driver esp_timer
)

# 3. RELAX THE RULES (The "Mega Fix"):
# This tells the compiler to treat all these strict checks as warnings, not errors.
target_compile_options(${COMPONENT_LIB} PRIVATE 
    -Wno-error=incompatible-pointer-types
    -Wno-error=char-subscripts
    -Wno-error=format
    -Wno-error=implicit-fallthrough
)