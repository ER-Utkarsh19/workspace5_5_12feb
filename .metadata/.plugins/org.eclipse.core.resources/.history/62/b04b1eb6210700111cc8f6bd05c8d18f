# components/bacnet/CMakeLists.txt

# 1. Find all C source files in the src directory
# (Assumes you have deleted 'ports', 'ucix', and 'sys' folders to avoid conflicts)
file(GLOB_RECURSE BACNET_SOURCES "src/*.c")

# 2. Register the component
idf_component_register(
    SRCS ${BACNET_SOURCES}
    INCLUDE_DIRS "include" "src"
    # Dependencies needed for networking and hardware access
    REQUIRES lwip esp_wifi esp_netif driver esp_timer nvs_flash
)

# 3. COMPILER FLAGS: Suppress strict warnings for this legacy component
target_compile_options(${COMPONENT_LIB} PRIVATE
    -Wno-error
    -Wno-error=incompatible-pointer-types
    -Wno-error=char-subscripts
    -Wno-error=format
    -Wno-error=implicit-fallthrough
    -Wno-unused-variable
    -Wno-unused-function
)